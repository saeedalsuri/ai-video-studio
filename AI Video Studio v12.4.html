<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Video Studio: v12.4 Master</title>
    <style>
        :root {
            --bg-color: #0b0c10;
            --panel-color: #1f2833;
            --accent-world: #20b2aa; /* Teal */
            --accent-cam: #f59e0b;   /* Gold */
            --accent-seq: #8b5cf6;   /* Violet */
            --text-color: #c5c6c7;
            --border-color: #2b3540;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background-color: var(--panel-color);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
        }

        /* HEADER */
        .header {
            padding: 20px;
            text-align: center;
            background: #000000;
            border-bottom: 1px solid var(--border-color);
            border-radius: 12px 12px 0 0;
        }
        h1 { margin: 0; color: white; letter-spacing: 1px; font-weight: 300; text-transform: uppercase; }
        .subtitle { color: #66fcf1; font-size: 0.85rem; margin-top: 5px; opacity: 0.8; }

        /* TABS */
        .tabs { display: flex; background: #111; }
        .tab-btn {
            flex: 1;
            padding: 18px;
            background: #111;
            border: none;
            color: #666;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 4px solid transparent;
        }
        .tab-btn:hover { background: #1a1a1a; color: white; }
        
        .active-1 { border-bottom-color: var(--accent-world); color: var(--accent-world); }
        .active-2 { border-bottom-color: var(--accent-cam); color: var(--accent-cam); }
        .active-3 { border-bottom-color: var(--accent-seq); color: var(--accent-seq); }

        /* CONTENT */
        .tab-content { display: none; padding: 30px; }
        .tab-content.active { display: block; animation: fadeEffect 0.4s; }
        @keyframes fadeEffect { from {opacity: 0;} to {opacity: 1;} }

        /* GRIDS */
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 20px; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; }

        label {
            display: block;
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 6px;
            font-weight: 700;
            text-transform: uppercase;
        }

        select, input, textarea {
            width: 100%;
            padding: 12px;
            background: #0b0c10;
            border: 1px solid #333;
            border-radius: 4px;
            color: #fff;
            box-sizing: border-box;
            font-size: 0.9rem;
        }
        select:focus, input:focus, textarea:focus { outline: none; border-color: white; }
        textarea { resize: vertical; height: 110px; }
        optgroup { background: #1f2833; color: white; font-weight: bold; }
        
        /* PANELS */
        .auth-panel { border: 1px solid #20b2aa; background: rgba(32, 178, 170, 0.05); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .trans-panel { border: 1px solid #8b5cf6; background: rgba(139, 92, 246, 0.05); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .global-settings { background: #111; padding: 15px; border-top: 1px solid #333; margin-top: 20px; border-radius: 0 0 12px 12px; }

        /* BUTTONS */
        .btn-generate { width: 100%; padding: 16px; border: none; border-radius: 6px; font-size: 1.1rem; font-weight: 800; text-transform: uppercase; cursor: pointer; color: #000; margin-top: 15px; transition: transform 0.1s; }
        .btn-generate:active { transform: scale(0.98); }
        .btn-1 { background: var(--accent-world); } .btn-1:hover { background: #66fcf1; }
        .btn-2 { background: var(--accent-cam); }   .btn-2:hover { background: #fbbf24; }
        .btn-3 { background: var(--accent-seq); color: white; }   .btn-3:hover { background: #a78bfa; }

        /* OUTPUT */
        .output-wrapper { margin-top: 30px; background: #000; padding: 15px; border-radius: 8px; border: 1px solid #333; position: relative; }
        textarea#finalOutput { background: transparent; border: none; color: #66fcf1; font-family: 'Consolas', monospace; height: 90px; }
        .copy-btn { position: absolute; top: 10px; right: 10px; background: #222; color: #aaa; border: 1px solid #444; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .copy-btn:hover { background: white; color: black; }

        /* HISTORY */
        .history-box { margin-top: 20px; max-height: 200px; overflow-y: auto; border-top: 1px dashed #333; padding-top: 10px; }
        .history-item { font-size: 0.8rem; padding: 10px; color: #888; border-bottom: 1px solid #222; cursor: pointer; display: flex; justify-content: space-between; }
        .history-item:hover { color: white; background: #111; }

        @media (max-width: 900px) { .grid-4, .grid-3 { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>AI Video Studio : v12.4</h1>
        <div class="subtitle">Unified Master | Falcon Logic | Negative Prompts</div>
    </div>

    <div class="tabs">
        <button id="btn1" class="tab-btn active-1" onclick="openTab(1)">1. World & Authenticity</button>
        <button id="btn2" class="tab-btn" onclick="openTab(2)">2. Cinematography</button>
        <button id="btn3" class="tab-btn" onclick="openTab(3)">3. Sequencing</button>
    </div>

    <div id="tab1" class="tab-content active">
        <div class="auth-panel">
            <label style="color:#20b2aa; margin-bottom:15px; font-size:0.9rem;">üèõÔ∏è Historical Authenticity</label>
            <div class="grid-3">
                <div><label>üë§ Ethnicity</label><select id="t1_race"><option value="">(AI Default)</option><option value="Central Asian, Mongol, Turkic features">Mongol / Turkic</option><option value="Middle Eastern, Circassian features">Mamluk (Circassian)</option><option value="East Asian, Han Chinese features">East Asian</option><option value="Northern European, Viking features">Northern European</option></select></div>
                <div><label>üõ°Ô∏è Costume</label><select id="t1_costume"><option value="">(Default)</option><option value="Lamellar Armor, Heavy Silk Robes">Mongol: Lamellar & Silk</option><option value="Chainmail with Mirror Plates, Turban Helmet">Mamluk: Mirror Plate</option><option value="Brigandine Armor, Leather">Brigandine</option><option value="Ceremonial Robes">Ceremonial Robes</option></select></div>
                <div><label>‚öîÔ∏è Props</label><select id="t1_props"><option value="">(None)</option><option value="Composite Recurve Bow">Recurve Bow</option><option value="Curved Scimitar Sword">Scimitar Sword</option><option value="Large War Map">War Map</option><option value="Horsehair Banner">Horsehair Banner</option></select></div>
            </div>
        </div>
        
        <div class="grid-4">
            <div><label>‚è≥ Era</label><select id="t1_period"><optgroup label="Historic"><option value="Medieval Era, 13th Century">Medieval (13th C)</option><option value="Ancient Rome, 100 AD">Ancient Rome</option><option value="Victorian Era, 1890s">Victorian Era</option></optgroup><optgroup label="Modern/SciFi"><option value="Modern Day 4K">Modern Day</option><option value="Cyberpunk 2077 Future">Cyberpunk</option></optgroup></select></div>
            <div><label>üåç Location</label><select id="t1_location"><optgroup label="Natural"><option value="Vast Steppe Grasslands">Steppe</option><option value="Vast Desert Dunes">Desert</option><option value="Deep Jungle">Jungle</option><option value="Snowy Tundra">Tundra</option></optgroup><optgroup label="Built"><option value="Chaotic Battlefield">Battlefield</option><option value="Stone Fortress Interior">Fortress</option><option value="Cyberpunk City Street">SciFi City</option></optgroup></select></div>
            <div><label>üé® Style</label><select id="t1_style"><option value="Epic Historical Film">Epic Film</option><option value="Cinematic Photorealistic">Realism</option><option value="Raw War Footage">Raw War Footage</option><option value="3D Animation">3D Animation</option></select></div>
            <div><label>üí° Lighting</label><select id="t1_lighting"><option value="Cinematic Volumetric Lighting">Volumetric</option><option value="Hard Sunlight">Hard Sun</option><option value="Firelight">Firelight</option></select></div>
        </div>
        
        <label>üìù Main Description</label><textarea id="t1_story" placeholder="Describe the scene..."></textarea>
        
        <div style="margin-top:10px; width:30%;">
            <label>üé≤ Seed</label><input type="number" id="t1_seed" placeholder="Random">
        </div>
        
        <button class="btn-generate btn-1" onclick="generateTab1()">Generate Authentic Prompt</button>
    </div>

    <div id="tab2" class="tab-content">
        <label>üìù Shot Description</label><textarea id="t2_story" placeholder="Auto-filled from Tab 1..."></textarea>
        <div style="margin-top:20px; border-top:1px solid #333; padding-top:20px;">
            <div class="grid-3">
                <div><label>üìê Framing (Full)</label><select id="t2_framing"><option value="Wide Shot">Wide Shot</option><option value="Extreme Wide Shot">Extreme Wide</option><option value="Establishing Shot">Establishing Shot</option><option value="Cowboy Shot">Cowboy Shot (Knees Up)</option><option value="Medium Shot">Medium Shot</option><option value="Close-up">Close-up</option><option value="Extreme Close-up">Extreme Close-up</option><option value="Over-the-shoulder">Over-the-shoulder</option><option value="Low Angle Hero Shot">Low Angle</option><option value="High Angle Drone">High Angle</option><option value="Dutch Angle">Dutch Angle</option></select></div>
                <div><label>üöÄ Movement (Full)</label><select id="t2_movement"><optgroup label="Standard"><option value="Static Camera">Static Tripod</option><option value="Slow Pan Right">Pan Right</option><option value="Slow Pan Left">Pan Left</option></optgroup><optgroup label="Vertical"><option value="Tilt Up">Tilt Up</option><option value="Tilt Down">Tilt Down</option><option value="Crane Up">Crane Up</option></optgroup><optgroup label="Dynamic"><option value="Dolly In">Dolly In</option><option value="Dolly Out">Dolly Out</option><option value="Truck Left">Truck Left</option><option value="Truck Right">Truck Right</option><option value="Tracking Shot">Tracking Shot</option><option value="Orbit Arc Shot">Orbit Arc</option></optgroup><optgroup label="Effects"><option value="Crash Zoom">Crash Zoom</option><option value="Dolly Zoom">Dolly Zoom</option></optgroup></select></div>
                <div><label>‚öñÔ∏è Rig (Full)</label><select id="t2_rig"><option value="Steadicam Smooth">Steadicam</option><option value="Gimbal Stabilized">Gimbal</option><option value="Handheld Camera Shake">Handheld</option><option value="Shoulder Rig">Shoulder Rig</option><option value="Snorricam Rig">Snorricam</option><option value="FPV Drone">FPV Drone</option></select></div>
            </div>
            <div class="grid-4">
                <div><label>üì∑ Lens</label><select id="t2_lens"><option value="Anamorphic Lens">Anamorphic</option><option value="35mm Lens">35mm</option><option value="85mm Lens">85mm</option><option value="Fisheye Lens">Fisheye</option><option value="Telephoto Lens">Telephoto</option></select></div>
                <div><label>üí° Lighting</label><select id="t2_lighting"><option value="Cinematic Volumetric Lighting">Volumetric</option><option value="Hard Lighting">Hard Light</option><option value="Rembrandt Lighting">Rembrandt</option><option value="Firelight">Firelight</option></select></div>
                <div><label>‚è±Ô∏è Duration</label><select id="t2_duration"><option value="5">5s</option><option value="10">10s</option></select></div>
                <div><label>üé≤ Seed</label><input type="number" id="t2_seed" placeholder="Random"></div>
            </div>
            <button class="btn-generate btn-2" onclick="generateTab2()">Generate Cinematic Prompt</button>
        </div>
    </div>

    <div id="tab3" class="tab-content">
        <label>üìù Context (Target of the Shot)</label>
        <textarea id="t3_story" placeholder="Describe who we are looking at..."></textarea>
        
        <div class="trans-panel" style="margin-top:20px;">
            <label style="color:#8b5cf6; margin-bottom:15px; font-size:0.9rem;">ü¶Ö Dynamic Transition & Flow</label>
            <div class="grid-3">
                <div><label>üéØ Shot Function</label><select id="t3_focus"><option value="Transition">4. Dynamic Transition</option><option value="Hero">1. Hero Shot</option><option value="Crowd">2. Crowd Scale</option><option value="Detail">3. Detail</option></select></div>
                <div><label>üöÄ Cinematic Motion</label><select id="t3_motion"><optgroup label="Falcon / Aerial Dynamics"><option value="Falcon Aerial Chase">Falcon Aerial Chase (Visible Bird)</option><option value="Falcon Dive to Reveal">Falcon Dive (Sky to Ground)</option><option value="POV Bird Flight">POV Bird Flight (Invisible Bird)</option><option value="Bird's Eye Top Down">Bird's Eye (Map View)</option></optgroup><optgroup label="Ground Action"><option value="Russian Arm Tracking">Russian Arm (Fast Track)</option><option value="Leading Tracking Shot">Leading Track (Frontal)</option><option value="Low Angle Tracking">Low Angle Track</option></optgroup><optgroup label="Standard"><option value="Zoom In">Zoom In</option><option value="Pan Right">Pan Right</option></optgroup></select></div>
                <div><label>üìê Framing Override</label><select id="t3_framing"><option value="">(Auto-Select)</option><option value="Bird's Eye View, Top Down">Bird's Eye View</option><option value="Extreme Wide Shot">Extreme Wide</option><option value="POV Shot">POV</option><option value="Close-up">Close-up</option><option value="Low Angle">Low Angle</option></select></div>
            </div>

            <div class="grid-3" style="border-top:1px dashed #444; padding-top:20px;">
                <div><label style="color:#f59e0b;">üß≠ Flight Direction</label><select id="t3_direction"><option value="">(AI Default)</option><option value="Diving Downwards towards ground">Diving Downwards</option><option value="Flying Forward towards horizon">Forward towards Horizon</option><option value="Swooping Low over heads">Swooping Low</option></select></div>
                <div><label style="color:#f59e0b;">‚òÅÔ∏è Altitude & Scale</label><select id="t3_altitude"><option value="">(AI Default)</option><option value="Stratospheric View, tiny ant-like figures">Stratospheric (Tiny Figures)</option><option value="High Altitude Drone View">High Altitude (Massive Scale)</option><option value="Treetop Skimming Level">Treetop Level (Fast)</option></select></div>
                <div><label>üë• Density (Full)</label><select id="t3_density"><option value="">(None)</option><option value="Massive Army of Thousands">Massive Army</option><option value="Infinite Sea of Soldiers">Infinite Sea</option><option value="Small Squad">Small Squad</option><option value="Solo Subject">Solo Subject</option></select></div>
            </div>
            
            <div class="grid-4">
                <div><label>üí® Atmosphere (Full)</label><select id="t3_atm"><option value="">(None)</option><option value="Battlefield Smoke">Battlefield Smoke</option><option value="Heavy Dust Trails">Dust & Debris</option><option value="Motion Blur">Motion Blur (Speed)</option><option value="Clear Air">Clear Air</option></select></div>
                <div><label>‚è±Ô∏è Duration</label><select id="t3_duration"><option value="10">10s</option><option value="5">5s</option></select></div>
                <div><label>üí™ Strength</label><select id="t3_strength"><option value="10">10 (Extreme)</option><option value="8">8 (High)</option><option value="5">5 (Normal)</option></select></div>
                <div><label>üé≤ Seed</label><input type="number" id="t3_seed" placeholder="Random"></div>
            </div>
            <button class="btn-generate btn-3" onclick="generateTab3()">Generate Transition Sequence</button>
        </div>
    </div>

    <div class="global-settings">
        <div class="grid-3">
            <div style="grid-column: span 2;">
                <label style="color:#ef4444;">üö´ Negative Prompt (Remove Artifacts)</label>
                <input type="text" id="negative_prompt" value="morphing, distortion, bad anatomy, text, watermark, blurry, low resolution, disfigured, extra limbs">
            </div>
            <div>
                <label>üìê Aspect Ratio</label>
                <select id="aspect_ratio">
                    <option value="--ar 16:9">16:9 (Cinematic)</option>
                    <option value="--ar 21:9">21:9 (Ultra Wide)</option>
                    <option value="--ar 9:16">9:16 (Vertical/Mobile)</option>
                    <option value="--ar 4:3">4:3 (Classic)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="output-wrapper">
        <div style="margin-bottom:10px; font-size:0.8rem; color:#666; font-weight:bold;">FINAL PROMPT</div>
        <textarea id="finalOutput" readonly></textarea>
        <button class="copy-btn" id="copyBtn" onclick="copyText()">Copy</button>
    </div>
    <div class="history-box" id="historyList"><div style="padding:10px; color:#444;">Session history...</div></div>
    <div style="text-align:right; margin-top:5px;"><button onclick="clearHistory()" style="background:none; border:none; color:#555; cursor:pointer; font-size:0.75rem;">Clear History</button></div>
</div>

<script>
    // AUTO-SAVE (Full list including Neg & AR)
    const fields = [
        't1_race','t1_costume','t1_props','t1_period','t1_location','t1_style','t1_lighting','t1_story','t1_seed',
        't2_story','t2_framing','t2_movement','t2_rig','t2_lens','t2_lighting','t2_duration','t2_seed',
        't3_story','t3_focus','t3_framing','t3_motion','t3_direction','t3_altitude','t3_density','t3_atm','t3_strength','t3_duration','t3_seed',
        'negative_prompt', 'aspect_ratio'
    ];
    window.onload = function() { fields.forEach(id => { const v = localStorage.getItem(id); if(v) document.getElementById(id).value = v; }); const h = localStorage.getItem('v12_4_history'); if(h) document.getElementById('historyList').innerHTML = h; };
    fields.forEach(id => document.getElementById(id).addEventListener('input', function(){ localStorage.setItem(id, this.value); }));

    function openTab(id) {
        document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(e => e.classList.remove('active-1','active-2','active-3'));
        document.getElementById('tab'+id).classList.add('active');
        document.getElementById('btn'+id).classList.add('active-'+id);
        if(id===2) { const t1 = document.getElementById('t1_story').value; if(t1 && !document.getElementById('t2_story').value) document.getElementById('t2_story').value = t1; }
    }

    // UTILS
    function get(id) { return document.getElementById(id).value; }
    function getGlobal() { return { neg: get('negative_prompt'), ar: get('aspect_ratio') }; }

    // GENERATORS
    function generateTab1() {
        const s = get('t1_story'), r = get('t1_race'), c = get('t1_costume'), pr = get('t1_props'), p = get('t1_period'), l = get('t1_location'), st = get('t1_style'), li = get('t1_lighting'), seed = get('t1_seed');
        const g = getGlobal();
        if(!s) return alert("Enter description");
        
        let res = [st, r, c, pr, p, l, s, li, "8k resolution, cinematic masterpiece"].filter(Boolean).join(", ");
        res += ` ${g.ar}`;
        if(seed) res += ` --seed ${seed}`;
        if(g.neg) res += ` --no ${g.neg}`;
        setOutput(res, "WORLD", "#20b2aa");
    }

    function generateTab2() {
        const s = get('t2_story'), f = get('t2_framing'), m = get('t2_movement'), r = get('t2_rig'), le = get('t2_lens'), li = get('t2_lighting'), dur = get('t2_duration'), seed = get('t2_seed');
        const g = getGlobal();
        if(!s) return alert("Enter description");
        
        let res = ["Cinematic", s, f, m, r, le, li, "8k resolution"].filter(Boolean).join(", ");
        res += ` ${g.ar} ( ${dur}s )`;
        if(seed) res += ` --seed ${seed}`;
        if(g.neg) res += ` --no ${g.neg}`;
        setOutput(res, "CAMERA", "#f59e0b");
    }

    function generateTab3() {
        const s = get('t3_story'), f = get('t3_focus'), fov = get('t3_framing'), den = get('t3_density'), atm = get('t3_atm'), m = get('t3_motion'), str = get('t3_strength'), dur = get('t3_duration'), dir = get('t3_direction'), alt = get('t3_altitude'), seed = get('t3_seed');
        const g = getGlobal();
        if(!s) return alert("Enter description");
        
        let ps = s, pf = fov || "Wide Shot"; 
        
        // DYNAMIC LOGIC
        if(f === "Transition") {
            let moveStr = m.toLowerCase();
            if(dir) moveStr += ` flying ${dir}`;
            ps = `Camera follows ${moveStr}, transitioning to ${s}`;
            if(!fov) pf = "Dynamic POV, Fluid Camera";
        }
        else if(f === "Crowd") { 
            let denStr = den || "Massive Army";
            if(den.includes("Massive") && alt) denStr += `, ${alt}`;
            ps = `${denStr}, ${s}`; 
            if(!fov) pf = "Extreme Wide Shot, Drone View"; 
        }
        else if(f === "Detail") { ps = `Extreme detail close-up, ${s}`; if(!fov) pf = "Low Angle, Ground Level"; }
        
        let res = ["Cinematic", ps, atm, pf, alt, m, "8k resolution"].filter(Boolean).join(", ");
        res += ` ${g.ar} --motion ${str} ( ${dur}s )`;
        if(seed) res += ` --seed ${seed}`;
        if(g.neg) res += ` --no ${g.neg}`;
        setOutput(res, "TRANSITION", "#8b5cf6");
    }

    function setOutput(t, l, c) {
        document.getElementById('finalOutput').value = t;
        const list = document.getElementById('historyList');
        const i = document.createElement('div'); i.className='history-item';
        i.innerHTML = `<span style="color:${c}; font-weight:bold; margin-right:10px;">[${l}]</span> ${t.substring(0,80)}...`;
        i.onclick = () => document.getElementById('finalOutput').value = t;
        list.prepend(i);
        localStorage.setItem('v12_4_history', list.innerHTML);
    }
    function copyText() {
        const el = document.getElementById('finalOutput'); el.select(); 
        if(navigator.clipboard) { navigator.clipboard.writeText(el.value).then(copySuccess, copyFail); }
        else { document.execCommand('copy') ? copySuccess() : copyFail(); }
    }
    function copySuccess() { const b = document.getElementById('copyBtn'); b.innerText = "‚úì"; setTimeout(()=>b.innerText="Copy",1000); }
    function copyFail() { alert("Manual copy required"); }
    function clearHistory() { document.getElementById('historyList').innerHTML=""; localStorage.removeItem('v12_4_history'); }
</script>

</body>
</html>